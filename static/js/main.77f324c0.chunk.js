(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{140:function(e,t,a){e.exports=a.p+"static/media/my_logo.1d221eaf.png"},142:function(e,t,a){e.exports=a(218)},155:function(e,t){},165:function(e,t){},213:function(e,t,a){},218:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(47),l=a.n(c),o=a(8),s=a.n(o),i=a(38),u=a(7),m=a(229),d=a(233),p=Object({NODE_ENV:"production",PUBLIC_URL:"/near-marketplace"}).CONTRACT_NAME||"sub2.nearcon.testnet";var f=function(e){switch(e){case"mainnet":return{networkId:"mainnet",nodeUrl:"https://rpc.mainnet.near.org",contractName:p,walletUrl:"https://wallet.near.org",helperUrl:"https://helper.mainnet.near.org",explorerUrl:"https://explorer.mainnet.near.org"};case"testnet":return{networkId:"testnet",nodeUrl:"https://rpc.testnet.near.org",contractName:p,walletUrl:"https://wallet.testnet.near.org",helperUrl:"https://helper.testnet.near.org",explorerUrl:"https://explorer.testnet.near.org"};default:throw Error("Unknown environment '".concat(e,"'."))}},b=a(57),E=a(66),g=f("testnet");function w(){return(w=Object(i.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.connect)(Object.assign({deps:{keyStore:new b.keyStores.BrowserLocalStorageKeyStore}},g));case 2:t=e.sent,window.walletConnection=new b.WalletConnection(t),window.accountId=window.walletConnection.getAccountId(),window.contract=new b.Contract(window.walletConnection.account(),g.contractName,{viewMethods:["getProduct","getProducts"],changeMethods:["buyProduct","setProduct"]});case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function h(){return x.apply(this,arguments)}function x(){return(x=Object(i.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=E.formatNearAmount,e.next=3,window.walletConnection.account().getAccountBalance();case 3:return e.t1=e.sent.total,e.abrupt("return",(0,e.t0)(e.t1,2));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function v(){window.walletConnection.requestSignIn(g.contractName)}function y(){window.walletConnection.signOut(),window.location.reload()}var N=a(231),O=a(226),j=a(236),C=function(e){var t=e.address,a=e.amount,n=e.symbol,c=e.destroy;return t?r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,null,r.a.createElement(N.a.Toggle,{variant:"light",align:"end",id:"dropdown-basic",className:"d-flex align-items-center border rounded-pill py-1"},a?r.a.createElement(r.a.Fragment,null,a," ",r.a.createElement("span",{className:"ms-1"}," ",n)):r.a.createElement(O.a,{animation:"border",size:"sm",className:"opacity-25"})),r.a.createElement(N.a.Menu,{className:"shadow-lg border-0"},r.a.createElement(N.a.Item,{href:"https://explorer.testnet.near.org/accounts/".concat(t),target:"_blank"},r.a.createElement(j.a,{direction:"horizontal",gap:2},r.a.createElement("i",{className:"bi bi-person-circle fs-4"}),r.a.createElement("span",{className:"font-monospace"},t))),r.a.createElement(N.a.Divider,null),r.a.createElement(N.a.Item,{as:"button",className:"d-flex align-items-center",onClick:function(){c()}},r.a.createElement("i",{className:"bi bi-box-arrow-right me-2 fs-4"}),"Disconnect")))):null},k=a(59),I=(a(212),function(){return r.a.createElement(k.a,{position:"bottom-center",autoClose:5e3,hideProgressBar:!0,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!1,pauseOnHover:!0})}),P=function(e){var t=e.text;return r.a.createElement("div",null,r.a.createElement("i",{className:"bi bi-check-circle-fill text-success mx-2"}),r.a.createElement("span",{className:"text-secondary mx-1"},t))},S=function(e){var t=e.text;return r.a.createElement("div",null,r.a.createElement("i",{className:"bi bi-x-circle-fill text-danger mx-2"}),r.a.createElement("span",{className:"text-secondary mx-1"},t))},F={text:""};P.defaultProps=F,S.defaultProps=F;var U=a(2),L=a(137),A=a(230),B=a(232),T=a(139),R=function(e){var t=e.save,a=Object(n.useState)(""),c=Object(u.a)(a,2),l=c[0],o=c[1],s=Object(n.useState)(""),i=Object(u.a)(s,2),m=i[0],d=i[1],p=Object(n.useState)(""),f=Object(u.a)(p,2),b=f[0],E=f[1],g=Object(n.useState)(""),w=Object(u.a)(g,2),h=w[0],x=w[1],v=Object(n.useState)(0),y=Object(u.a)(v,2),N=y[0],O=y[1],j=Object(n.useState)(!1),C=Object(u.a)(j,2),k=C[0],I=C[1],P=function(){return I(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{onClick:function(){return I(!0)},variant:"dark",className:"rounded-pill px-0",style:{width:"38px"}},r.a.createElement("i",{class:"bi bi-plus"})),r.a.createElement(A.a,{show:k,onHide:P,centered:!0},r.a.createElement(A.a.Header,{closeButton:!0},r.a.createElement(A.a.Title,null,"New Product")),r.a.createElement(B.a,null,r.a.createElement(A.a.Body,null,r.a.createElement(T.a,{controlId:"inputName",label:"Product name",className:"mb-3"},r.a.createElement(B.a.Control,{type:"text",onChange:function(e){o(e.target.value)},placeholder:"Enter name of product"})),r.a.createElement(T.a,{controlId:"inputUrl",label:"Image URL",className:"mb-3"},r.a.createElement(B.a.Control,{type:"text",placeholder:"Image URL",onChange:function(e){d(e.target.value)}})),r.a.createElement(T.a,{controlId:"inputDescription",label:"Description",className:"mb-3"},r.a.createElement(B.a.Control,{as:"textarea",placeholder:"description",style:{height:"80px"},onChange:function(e){E(e.target.value)}})),r.a.createElement(T.a,{controlId:"inputLocation",label:"Location",className:"mb-3"},r.a.createElement(B.a.Control,{type:"text",placeholder:"Location",onChange:function(e){x(e.target.value)}})),r.a.createElement(T.a,{controlId:"inputPrice",label:"Price",className:"mb-3"},r.a.createElement(B.a.Control,{type:"text",placeholder:"Price",onChange:function(e){O(e.target.value)}})))),r.a.createElement(A.a.Footer,null,r.a.createElement(L.a,{variant:"outline-secondary",onClick:P},"Close"),r.a.createElement(L.a,{variant:"dark",disabled:!(l&&m&&b&&h&&N),onClick:function(){t({name:l,image:m,description:b,location:h,price:N}),P()}},"Save product"))))},D=a(138),H=a(235),M=a(227),_=function(e){var t=e.product,a=e.buy,n=t.id,c=t.price,l=t.name,o=t.description,s=t.sold,i=t.location,u=t.image,m=t.owner;return r.a.createElement(D.a,{key:n},r.a.createElement(H.a,{className:" h-100"},r.a.createElement(H.a.Header,null,r.a.createElement(j.a,{direction:"horizontal",gap:2},r.a.createElement("span",{className:"font-monospace text-secondary"},m),r.a.createElement(M.a,{bg:"secondary",className:"ms-auto"},s," Sold"))),r.a.createElement("div",{className:" ratio ratio-4x3"},r.a.createElement("img",{src:u,alt:l,style:{objectFit:"cover"}})),r.a.createElement(H.a.Body,{className:"d-flex  flex-column text-center"},r.a.createElement(H.a.Title,null,l),r.a.createElement(H.a.Text,{className:"flex-grow-1 "},o),r.a.createElement(H.a.Text,{className:"text-secondary"},r.a.createElement("span",null,i)),r.a.createElement(L.a,{variant:"outline-dark",onClick:function(){a(n,c)},className:"w-100 py-3"},"Buy for ",b.utils.format.formatNearAmount(c)," NEAR"))))},z=function(){return r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(O.a,{animation:"border",role:"status",className:"opacity-25"},r.a.createElement("span",{className:"visually-hidden"},"Loading...")))},J=a(228),W=a(234),V=1e14;function q(e){return K.apply(this,arguments)}function K(){return(K=Object(i.a)(s.a.mark(function e(t){var a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,n=t.price,e.next=3,window.contract.buyProduct({productId:a},V,n);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}var G=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(u.a)(l,2),m=o[0],d=o[1],p=Object(n.useCallback)(Object(i.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(!0),e.t0=c,e.next=5,window.contract.getProducts();case 5:e.t1=e.sent,(0,e.t0)(e.t1),e.next=12;break;case 9:e.prev=9,e.t2=e.catch(0),console.log({error:e.t2});case 12:return e.prev=12,d(!1),e.finish(12);case 15:case"end":return e.stop()}},e,null,[[0,9,12,15]])}))),f=function(){var e=Object(i.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{d(!0),(a=t,a.id=Object(W.a)(),a.price=Object(E.parseNearAmount)(a.price+""),window.contract.setProduct({product:a})).then(function(e){p()}),Object(k.b)(r.a.createElement(P,{text:"Product added successfully."}))}catch(n){console.log({error:n}),Object(k.b)(r.a.createElement(S,{text:"Failed to create a product."}))}finally{d(!1)}case 1:case"end":return e.stop()}var a},e)}));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(i.a)(s.a.mark(function e(t,a){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q({id:t,price:a}).then(function(e){return p()});case 3:Object(k.b)(r.a.createElement(P,{text:"Product bought successfully"})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),Object(k.b)(r.a.createElement(S,{text:"Failed to purchase product."}));case 9:return e.prev=9,d(!1),e.finish(9);case 12:case"end":return e.stop()}},e,null,[[0,6,9,12]])}));return function(t,a){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){p()},[]),r.a.createElement(r.a.Fragment,null,m?r.a.createElement(z,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-between align-items-center mb-4"},r.a.createElement("h1",{className:"fs-4 fw-bold mb-10"},r.a.createElement("b",null,"La Vie d'Or - Jewelery Shop")),r.a.createElement(R,{save:f})),r.a.createElement(J.a,{xs:1,sm:2,lg:3,className:"g-3  mb-5 g-xl-4 g-xxl-5"},a.map(function(e){return r.a.createElement(_,{product:Object(U.a)({},e),buy:b})}))))},Q=function(e){var t=e.name,a=e.login,n=e.coverImg;return n?r.a.createElement("div",{className:"d-flex justify-content-center flex-column text-center ",style:{background:"linear-gradient(45deg, red, orange, yellow, green, blue, indigo, violet, gold)",minHeight:"100vh"}},r.a.createElement("div",{className:"mt-auto text-light mb-5"},r.a.createElement("div",{className:" ratio ratio-1x1 mx-auto mb-2",style:{maxWidth:"500px"}},r.a.createElement("img",{src:n,alt:""})),r.a.createElement("h1",null,t),r.a.createElement("p",null,"Please connect your wallet to continue."),r.a.createElement(L.a,{onClick:a,variant:"outline-light",className:"rounded-pill px-3 mt-3"},"Connect Wallet")),r.a.createElement("p",{className:"mt-auto text-secondary"},"Powered by NEAR")):null};Q.defaultProps={name:""};var X=Q,Y=a(140),Z=a.n(Y),$=(a(213),function(){var e=window.walletConnection.account(),t=Object(n.useState)("0"),a=Object(u.a)(t,2),c=a[0],l=a[1],o=Object(n.useCallback)(Object(i.a)(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.accountId){t.next=6;break}return t.t0=l,t.next=4,h();case 4:t.t1=t.sent,(0,t.t0)(t.t1);case 6:case"end":return t.stop()}},t)})));return Object(n.useEffect)(function(){o()},[o]),r.a.createElement(r.a.Fragment,null,r.a.createElement(I,null),e.accountId?r.a.createElement(m.a,{fluid:"md"},r.a.createElement(d.a,{className:"justify-content-end pt-3 pb-5"},r.a.createElement(d.a.Item,null,r.a.createElement(C,{address:e.accountId,amount:c,symbol:"NEAR",destroy:y}))),r.a.createElement("main",null," ",r.a.createElement(G,null)," ")):r.a.createElement(X,{name:"",login:v,coverImg:Z.a}))}),ee=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,237)).then(function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,l=t.getTTFB;a(e),n(e),r(e),c(e),l(e)})};a(219),a(216),a(217);window.nearInitPromise=function(){return w.apply(this,arguments)}().then(function(){l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement($,null)),document.getElementById("root"))}).catch(console.error),ee()}},[[142,1,2]]]);
//# sourceMappingURL=main.77f324c0.chunk.js.map